@import b3.vertical.fieldConstructor
@import lunatech.lunchplanner.models.Dish
@import lunatech.lunchplanner.models.User
@import lunatech.lunchplanner.models.Menu
@import lunatech.lunchplanner.models.MenuWithNamePerDay
@import lunatech.lunchplanner.viewModels.DishForm
@import lunatech.lunchplanner.viewModels.MenuForm
@import lunatech.lunchplanner.viewModels.MenuPerDayForm

@(activeTab: Int = 0, admin: User, dishForm: Form[DishForm], menuForm: Form[MenuForm], listOfDishes: Array[Dish], listOfMenus: Array[Menu],  menuPerDayForm: Form[MenuPerDayForm], menuOptions: Seq[(String,String)], listOfMenusPerDay: Array[MenuWithNamePerDay])(implicit messages: play.api.i18n.Messages)
@main("Overview", admin, "admin") {
    <div id="Wrapper">
        <div id="Container">
            <div class="Left">
                <div class="col">

                    <h1>Manage dishes and menus</h1>

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs">
                        <li role="presentation" class="@if(activeTab == 0){ active }"><a data-toggle="tab" href="#dishes">Dishes</a></li>
                        <li role="presentation" class="@if(activeTab == 1){ active }"><a data-toggle="tab" href="#menus">Menus</a></li>
                        <li role="presentation" class="@if(activeTab == 2){ active }"><a data-toggle="tab" href="#menuPerDay">Scheduling of menus</a></li>
                    </ul>

                        <!-- Tab panes -->
                    <div class="tab-content">
                        <!-- Dishes -->
                        <div role="tabpanel" class="tab-pane @if(activeTab == 0){ active } " id="dishes">
                            <div>
                                <br>
                                <label>Create new dish</label>
                                @helper.form(lunatech.lunchplanner.controllers.routes.DishController.createNewDish) {
                                    @b3.text( dishForm("name"), '_label -> "Name", 'placeholder -> "Short dish name" )
                                    @b3.text( dishForm("description"), '_label -> "Description",  'placeholder -> "Dish description")
                                    @b3.checkbox( dishForm("isVegetarian"), '_text -> "Is vegetarian" )
                                    @b3.checkbox( dishForm("hasSeaFood"), '_text -> "Has sea food")
                                    @b3.checkbox( dishForm("hasPork"), '_text -> "Has pork")
                                    @b3.checkbox( dishForm("hasBeef"), '_text -> "Has beef")
                                    @b3.checkbox( dishForm("hasChicken"), '_text -> "Has Chicken")
                                    @b3.checkbox( dishForm("isGlutenFree"), '_text -> "Is gluten free")
                                    @b3.checkbox( dishForm("hasLactose"), '_text -> "Has lactose")
                                    @b3.text( dishForm("remarks"), '_label -> "Additional remarks", 'placeholder -> "Optional" )
                                    @b3.submit('class -> "btn btn-primary"){ Create dish }
                                }
                            </div>
                            <div>
                                <br>
                                <label>List of dishes</label>
                                @for(index <- listOfDishes.indices) {
                                    @b3.checkbox( dishForm("dishesUuid[]"), '_text -> listOfDishes(index).name, 'value -> listOfDishes(index).uuid)
                                }
                            </div>
                        </div>

                        <!-- Menus -->
                        <div role="tabpanel" class="tab-pane @if(activeTab == 1){ active }" id="menus">
                            <div>
                                <br>
                                <label>Create new menu</label>
                                @helper.form(lunatech.lunchplanner.controllers.routes.MenuController.createNewMenu) {
                                    @b3.text( menuForm("menuName"), '_label -> "Name", 'placeholder -> "Short menu name" )

                                    @for(index <- listOfDishes.indices) {
                                        @b3.checkbox( menuForm("dishesUuid[]"), '_text -> listOfDishes(index).name, 'value -> listOfDishes(index).uuid)
                                    }
                                    @b3.submit('class -> "btn btn-primary"){ Create Menu }
                                }
                            </div>
                            <div>
                                <br>
                                <label>List of menus</label>
                                @for(index <- listOfMenus.indices) {
                                    @b3.checkbox( menuForm("uuid[]"), '_text -> listOfMenus(index).name, 'value -> listOfDishes(index).uuid)
                                }
                            </div>
                        </div>

                            <!-- Menus -->
                        <div role="tabpanel" class="tab-pane @if(activeTab == 2){ active }" id="menuPerDay">
                            <div>
                                <br>
                                <label>Associate a menu to a date</label>
                                @helper.form(lunatech.lunchplanner.controllers.routes.MenuPerDayController.createNewMenuPerDay) {
                                    @datepicker(menuPerDayForm("date"), 'value -> "2017-05-01")(
                                        '_label -> "Date")
                                    @b3.select(menuPerDayForm("menuUuid"), options = menuOptions, '_label -> "Select menu", '_default -> "Select an option")
                                    @b3.submit('class -> "btn btn-primary") { Associate menu with date }
                                }
                            </div>
                            <div>
                                <br>
                                <label>List of menus per day</label>
                                @for(index <- listOfMenusPerDay.indices) {
                                    @b3.checkbox( menuPerDayForm("uuid[]"), '_text -> (listOfMenusPerDay(index).menuDateAndName + " (" + listOfMenusPerDay(index).numberOfPeopleSignedIn + " people attending)"), 'value -> listOfMenusPerDay(index).uuid)
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
